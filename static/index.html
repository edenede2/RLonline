<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Reversal Learning Task</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <link rel="stylesheet" href="/static/styles.css" />
</head>
<body>
  <!-- START SCREEN: enter participant ID and version -->
  <div id="start-screen" class="screen visible">
    <h1>Reversal Learning Task</h1>
    <div class="form-row">
      <label for="participant-id">Participant ID:</label>
      <input type="text" id="participant-id" placeholder="e.g. 876" />
    </div>

    <button id="start-btn">Start Instructions</button>
  </div>

  <!-- PHONE FLIP SCREEN -->
  <div id="phone-flip-screen" class="screen hidden">
    <div class="phone-flip-wrapper">
      <video id="phone-flip-video" class="phone-flip-video" autoplay loop muted playsinline>
        <source src="/images/3781976713-preview.mp4" type="video/mp4">
        Your browser does not support the video tag.
      </video>
      <p class="phone-flip-text">במהלך ביצוע המטלה שמור על המכשיר במצב מאוזן. לחץ continue לאישור.</p>
      <button id="flip-confirm-btn">Continue</button>
    </div>
  </div>


  <!-- INSTRUCTIONS SCREEN -->
  <div id="instructions-screen" class="screen hidden">
    <div class="instruction-content">
      <div class="instruction-wrapper">
        <img id="instr-image" class="instruction-image" src="" alt="instructions"/>
      </div>
      <button id="next-instr-btn">Next</button>
    </div>
  </div>

  <!-- TASK SCREEN -->
  <div id="task-screen" class="screen hidden">
    <!-- Debug Info Panel -->
    <div id="debug-info" class="debug-panel">
      <div><strong>Version:</strong> <span id="debug-version">-</span></div>
      <div><strong>Block:</strong> <span id="debug-block">-</span> (<span id="debug-block-type">-</span>)</div>
      <div><strong>Trial:</strong> <span id="debug-trial">-</span> / 20</div>
      <div><strong>Score:</strong> <span id="debug-score">0</span></div>
      <div><strong>Reversal Pair:</strong> <span id="debug-reversal-pair">-</span></div>
      <div><strong>Learning Pair:</strong> <span id="debug-learning-pair">-</span></div>
      <div><strong>High Set:</strong> <span id="debug-high-set">-</span></div>
    </div>
    
    <!-- Score in the corner -->
    <div id="score-box" class="hidden">
      Score: <span id="score-val">0</span>
    </div>

    <!-- Fixation cross / fixation image -->
    <img id="fixation-img"
         class="task-elem hidden"
         src="/images/fixation.jpg"
         alt="fixation" />

    <!-- Choice images -->
    <img id="left-img"
         class="task-elem choice-img hidden"
         src=""
         alt="left choice"/>
    <img id="right-img"
         class="task-elem choice-img hidden"
         src=""
         alt="right choice"/>

    <!-- Intermediate feedback prep screen (gotme.png) -->
    <img id="gotme-img"
         class="task-elem hidden"
         src="/images/gotme.png"
         alt="gotme" />

    <!-- Combined feedback screen -->
    <div id="feedback-container" class="task-elem hidden">
      <img id="feedback-text-img"
           class="feedback-text-img"
           src=""
           alt="feedback text" />
      <img id="feedback-result-img"
           class="feedback-result-img"
           src=""
           alt="feedback result" />
    </div>

    <!-- Block / phase message -->
    <div id="block-msg" class="hidden"></div>
  </div>

  <!-- CONFIDENCE RATING SCREEN -->
  <div id="confidence-screen" class="screen hidden">
    <div class="confidence-wrapper">
      <div class="confidence-item">
        <div class="image-preview">
          <img id="confidence-current-img" src="" alt="Current Image" class="preview-img-large">
        </div>
        <div class="slider-and-button-container">
          <p class="confidence-subtitle">מה הסיכוי לקבל ניקוד על התמונה הבאה ? </p>
          <div class="slider-container">
            <label class="slider-label">0</label>
            <input type="range" id="confidence-slider" class="confidence-slider" min="0" max="100" value="50">
            <label class="slider-label">100</label>
          </div>
          <button id="submit-confidence-btn">המשך</button>
        </div>
      </div>
    </div>
  </div>

  <!-- END SCREEN -->
  <div id="end-screen" class="screen hidden">
    <div class="end-wrapper">
      <img id="thankyou-img"
           src="/images/blank.jpg"
           alt="thank you"
           class="thankyou-image"/>
      <h2>Thank you!</h2>
      <p>Your final score: <span id="final-score"></span></p>
    </div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>